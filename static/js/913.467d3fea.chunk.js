"use strict";(self.webpackChunkfurniture_production_frontend=self.webpackChunkfurniture_production_frontend||[]).push([[913],{8742:function(e,r,n){var a=n(1413),t=n(2791),s=n(2310),i=(n(8353),n(4452)),c=(n(4103),n(184)),o={Dots:!1,Thumbs:{type:"modern"}};r.Z=function(e){var r=(0,t.useRef)(null);return(0,t.useEffect)((function(){var n=r.current,t=(0,a.Z)((0,a.Z)({},o),e.options||{}),c=new s.lr(n,t,{Thumbs:i.o3});return function(){c.destroy()}})),(0,c.jsx)("div",{className:"f-carousel",ref:r,children:e.children})}},1072:function(e,r,n){var a=n(2791),t=n(2310),s=(n(1167),n(184));r.Z=function(e){var r=(0,a.useRef)(null);return(0,a.useEffect)((function(){var n=r.current,a=e.delegate||"[data-fancybox]",s=e.options||{};return t.KR.bind(n,a,s),function(){t.KR.unbind(n),t.KR.close()}})),(0,s.jsx)("div",{ref:r,children:e.children})}},381:function(e,r,n){n.d(r,{N:function(){return d}});var a=n(3439),t=n(7948),s=n.n(t),i="PopUp_modalCloseButton__m06-1",c="PopUp_menuIcon__5-11v",o=n(184),d=function(e){var r=e.isOpen,n=e.close,t=e.body;return(0,o.jsxs)(s(),{isOpen:r,onRequestClose:n,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,o.jsx)("button",{className:i,type:"button",onClick:n,children:(0,o.jsx)("svg",{className:c,children:(0,o.jsx)("use",{href:"".concat(a.Z,"#icon-close-circle")})})}),t]})}},9913:function(e,r,n){n.r(r),n.d(r,{default:function(){return z}});var a=n(4420),t=n(7689),s=n(3050),i=n(6502),c=n(5861),o=n(3433),d=n(9439),l=n(4687),u=n.n(l),p={backIcon:"OrderInfo_backIcon__N0wiA",orderNumber:"OrderInfo_orderNumber__2q9MF",description:"OrderInfo_description__zLh2V",orderName:"OrderInfo_orderName__-OHBi",orderSize:"OrderInfo_orderSize__BVU05",orderFabric:"OrderInfo_orderFabric__X9Sm5",orderDescription:"OrderInfo_orderDescription__iXIxd",orderDeadline:"OrderInfo_orderDeadline__8ywa6",imagesList:"OrderInfo_imagesList__LA3Fp",orderImage:"OrderInfo_orderImage__2G8nz",btn:"OrderInfo_btn__fLqg+",minBtn:"OrderInfo_minBtn__uJ0Ts",activeBtn:"OrderInfo_activeBtn__zF9Bf",backBtn:"OrderInfo_backBtn__RBKzG",formWrapper:"OrderInfo_formWrapper__+kjz9",formItem:"OrderInfo_formItem__kNYm6",label:"OrderInfo_label__s3BbH",field:"OrderInfo_field__Q3vr4",inputItem:"OrderInfo_inputItem__GG5Bb",optionWrapper:"OrderInfo_optionWrapper__qdKC2"},m=n(2791),f=n(9230),b=n(8363),x=n.n(b),h=n(5294),j=n(5842),v=n(3439),g=n(5705),N=n(4217),_=n(8384),S=n(381),I=n(1072),O=n(8742),F=n(184),k=function(e){e.id;var r=(0,f.$G)().t,n=(0,a.I0)(),s=(0,a.v9)(i.ST),l=(0,a.v9)(N.dy),b=(0,t.s0)(),k=[{value:"",label:"".concat(r("not ordered"))},{value:"ordered",label:"".concat(r("ordered"))},{value:"received",label:"".concat(r("received"))}],z=s.fabricStatus?{value:"",label:"".concat(r(s.fabricStatus))}:{value:"",label:"".concat(r("not ordered"))};function y(e){var r=new Date(e),n=r.getMonth()+1;return"".concat(r.getDate().toString().padStart(2,"0"),".").concat(n.toString().padStart(2,"0"),".").concat(r.getFullYear())}(0,m.useEffect)((function(){}),[s]);var w=(0,m.useState)(!1),C=(0,d.Z)(w,2),D=C[0],B=C[1],Z=(0,m.useState)([]),R=(0,d.Z)(Z,2),P=R[0],E=R[1],T=(0,m.useState)(!1),W=(0,d.Z)(T,2),U=W[0],H=W[1];"ordered"===s.fabricStatus?z={value:"ordered",label:"".concat(r("ordered"))}:"received"===s.fabricStatus&&(z={value:"received",label:"".concat(r("received"))});var L=function(){B(!0),document.body.classList.add("modal-open"),E([])},q=function(){B(!1),document.body.classList.remove("modal-open")},G=function(){var e=(0,c.Z)(u().mark((function e(r){var a,t,i,c,o,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),a=s.orderStatus,t=s.fabricStatus,i=s.coverStatus,c=s.frameStatus,""===r.value?t="":r.value&&(t=r.value),r.target&&("isSewn"===r.target.name?i="TRUE"!==s.coverStatus?"TRUE":"":"frame"===r.target.name?c="TRUE"!==s.frameStatus?"TRUE":"":"order"===r.target.name&&(a="TRUE"!==s.orderStatus?"TRUE":"")),(o=new FormData).append("group",s.group),o.append("size",s.size),o.append("name",s.name),o.append("fabric",s.fabric),o.append("description",s.description),o.append("base",s.base),o.append("deliveryDate",s.deliveryDate),o.append("innerPrice",s.innerPrice),o.append("number",s.number),o.append("dealer",s.dealer),o.append("deadline",s.deadline),o.append("dateOfOrder",y(s.dateOfOrder)),o.append("adress",s.adress),o.append("additional",s.additional),o.append("rest",s.rest),o.append("plannedDeadline",y(s.plannedDeadline)),o.append("orderStatus",a),o.append("_id",s._id),s.images.forEach((function(e,r){o.append("images[".concat(r,"]"),s.images[r])})),o.append("fabricStatus",t),o.append("coverStatus",i),o.append("frameStatus",c),e.next=32,h.Z.post("/orders/update",o,{headers:{"Content-Type":"multipart/form-data"}});case 32:d=e.sent,n((0,_.zH)(d.data)),H(!1);case 35:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),K=function(){var e=(0,c.Z)(u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s._id),e.next=3,n((0,_.iI)(s._id));case 3:r=e.sent,console.log(r),b("/orders",{replace:!0});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsxs)("div",{className:p.wrapper,children:[(0,F.jsx)("button",{className:"".concat(p.btn," ").concat(p.backBtn),onClick:function(){return window.history.back()},children:(0,F.jsx)("svg",{className:p.backIcon,children:(0,F.jsx)("use",{href:"".concat(v.Z,"#icon-arrow-right"),width:"32px"})})}),(0,F.jsx)("p",{className:p.orderNumber,children:s.number}),(0,F.jsxs)("div",{className:p.description,children:[(0,F.jsxs)("p",{className:p.orderName,children:[s.group," ",s.name]}),(0,F.jsxs)("p",{className:p.orderSize,children:[r("size"),": ",s.size]}),(0,F.jsxs)("p",{className:p.orderFabric,children:[r("fabric"),": ",s.fabric]}),(0,F.jsxs)("p",{className:p.orderDescription,children:[r("description"),": ",s.description]}),"manager"===l.description||"administrator"===l.description?(0,F.jsxs)("p",{className:p.orderDescription,children:[r("inner price"),": ",s.innerPrice]}):(0,F.jsx)(F.Fragment,{}),(0,F.jsxs)("p",{className:p.orderDeadline,children:[r("deadline"),": ",y(s.plannedDeadline)]}),(0,F.jsx)("p",{children:s.dealer}),"manager"===l.description||"administrator"===l.description?(0,F.jsxs)("div",{children:[(0,F.jsxs)("p",{className:p.orderAdress,children:[r("adress"),": ",s.adress]}),(0,F.jsxs)("p",{className:p.orderRest,children:[r("rest"),": ",s.rest]})]}):(0,F.jsx)(F.Fragment,{})]}),s.images&&0!==s.images.length?(0,F.jsx)(I.Z,{options:{Carousel:{infinite:!1}},children:(0,F.jsx)(O.Z,{options:{infinite:!1},children:s.images.map((function(e){return(0,F.jsx)("div",{className:"f-carousel__slide","data-fancybox":"gallery","data-src":"https://lh3.googleusercontent.com/d/".concat(e,"=w800?authuser=0"),children:(0,F.jsx)("img",{src:"https://lh3.googleusercontent.com/d/".concat(e,"=w800?authuser=0"),alt:e,width:"auto",height:"500"})},e)}))})}):(0,F.jsx)(F.Fragment,{}),"administrator"===l.description?(0,F.jsxs)("div",{className:p.optionWrapper,children:[(0,F.jsx)("button",{className:p.btn,onClick:L,children:r("edit")}),(0,F.jsx)(j.ZP,{className:p.fabricStatusSelector,name:"fabricStatusSelector",id:"fabricStatusSelector",onChange:function(e){return G(e)},options:k,defaultValue:z,placeholder:r("fabric")}),(0,F.jsx)("button",{name:"isSewn",className:""===s.coverStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("is sewn"))}),(0,F.jsx)("button",{name:"frame",className:""===s.frameStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("frame is done"))}),(0,F.jsx)("button",{name:"order",className:""===s.orderStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("order is done"))}),(0,F.jsx)("button",{name:"done",className:p.btn,onClick:K,children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("to archive"))})]}):(0,F.jsx)(F.Fragment,{}),"manager"===l.description?(0,F.jsxs)("div",{className:p.optionWrapper,children:[(0,F.jsx)("button",{className:p.btn,onClick:L,children:r("edit")}),(0,F.jsx)(j.ZP,{className:p.fabricStatusSelector,name:"fabricStatusSelector",id:"fabricStatusSelector",onChange:function(e){return G(e)},options:k,defaultValue:z,placeholder:r("fabric")}),(0,F.jsx)("button",{name:"order",className:""===s.orderStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("order is done"))}),(0,F.jsx)("button",{name:"done",className:p.btn,onClick:K,children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("to archive"))})]}):(0,F.jsx)(F.Fragment,{}),"seamstress"===l.description?(0,F.jsx)("div",{className:p.optionWrapper,children:(0,F.jsx)("button",{name:"isSewn",className:""===s.coverStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("is sewn"))})}):(0,F.jsx)(F.Fragment,{}),"carpenter"===l.description?(0,F.jsx)("div",{className:p.optionWrapper,children:(0,F.jsx)("button",{name:"frame",className:""===s.frameStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("frame is done"))})}):(0,F.jsx)(F.Fragment,{}),"upholsterer"===l.description?(0,F.jsx)("div",{className:p.optionWrapper,children:(0,F.jsx)("button",{name:"order",className:""===s.orderStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("order is done"))})}):(0,F.jsx)(F.Fragment,{}),(0,F.jsx)(S.N,{isOpen:D,close:q,className:p.modalContent,body:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("p",{children:"Edit mode"}),(0,F.jsx)(g.J9,{initialValues:{group:s.group,size:s.size,name:s.name,fabric:s.fabric,description:s.description,base:s.base,deliveryDate:s.deliveryDate,innerPrice:s.innerPrice,number:s.number,dealer:s.dealer,deadline:s.deadline,dateOfOrder:y(s.dateOfOrder),adress:s.adress,additional:s.additional,rest:s.rest,plannedDeadline:y(s.plannedDeadline),orderStatus:s.orderStatus,_id:s._id,images:s.images,fabricStatus:s.fabricStatus,coverStatus:s.coverStatus,frameStatus:s.frameStatus},onSubmit:function(){var e=(0,c.Z)(u().mark((function e(r){var a,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,H(!0),(a=new FormData).append("group",r.group),a.append("size",r.size),a.append("name",r.name),a.append("fabric",r.fabric),a.append("description",r.description),a.append("base",r.base),a.append("deliveryDate",r.deliveryDate),a.append("innerPrice",r.innerPrice),a.append("number",r.number),a.append("dealer",r.dealer),a.append("deadline",r.deadline),a.append("dateOfOrder",r.dateOfOrder),a.append("adress",r.adress),a.append("additional",r.additional),a.append("rest",r.rest),a.append("plannedDeadline",r.plannedDeadline),a.append("orderStatus",r.orderStatus),a.append("_id",r._id),r.images.forEach((function(e,n){a.append("images[".concat(n,"]"),r.images[n])})),a.append("fabricStatus",r.fabricStatus),a.append("coverStatus",r.coverStatus),a.append("frameStatus",r.frameStatus),P.forEach((function(e){a.append("file",e)})),e.next=28,h.Z.post("/orders/update",a,{headers:{"Content-Type":"multipart/form-data"}});case 28:t=e.sent,n((0,_.zH)(t.data)),H(!1),q(),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(0),console.log(e.t0);case 37:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(r){return e.apply(this,arguments)}}(),children:(0,F.jsxs)(g.l0,{className:p.formWrapper,children:[(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"group",children:r("group")}),(0,F.jsx)(g.gN,{className:p.field,id:"group",name:"group"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"size",children:r("size")}),(0,F.jsx)(g.gN,{className:p.field,id:"size",name:"size"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"name",children:r("order name")}),(0,F.jsx)(g.gN,{className:p.field,id:"name",name:"name"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"fabric",children:r("fabric")}),(0,F.jsx)(g.gN,{className:p.field,id:"fabric",name:"fabric"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"description",children:r("description")}),(0,F.jsx)(g.gN,{className:p.field,id:"description",name:"description",placeholder:"Description"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"base",children:r("base")}),(0,F.jsx)(g.gN,{className:p.field,id:"base",name:"base"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"innerPrice",children:r("inner price")}),(0,F.jsx)(g.gN,{className:p.field,id:"innerPrice",name:"innerPrice"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"number",children:r("number")}),(0,F.jsx)(g.gN,{className:p.field,id:"number",name:"number"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"adress",children:r("adress")}),(0,F.jsx)(g.gN,{className:p.field,id:"adress",name:"adress"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"additional",children:r("additional")}),(0,F.jsx)(g.gN,{className:p.field,id:"additional",name:"additional"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"rest",children:r("rest")}),(0,F.jsx)(g.gN,{className:p.field,id:"rest",name:"rest"})]}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"plannedDeadline",children:r("planned deadline")}),(0,F.jsx)(g.gN,{className:p.field,id:"plannedDeadline",name:"plannedDeadline"})]}),(0,F.jsx)("div",{className:p.formItem,children:(0,F.jsx)(g.F2,{name:"images",render:function(e){return(0,F.jsx)("div",{className:p.field,children:e.form.values.images.map((function(n,a){return(0,F.jsxs)("div",{className:p.inputItem,children:[(0,F.jsx)("img",{src:"https://lh3.googleusercontent.com/d/".concat(n,"=w200?authuser=0"),alt:n}),(0,F.jsx)("button",{className:p.btn,type:"button",onClick:function(){return e.remove(a)},children:r("delete")})]},a)}))})}})}),(0,F.jsxs)("div",{className:p.formItem,children:[(0,F.jsx)("label",{htmlFor:"files",children:r("add new images")}),(0,F.jsx)(g.gN,{className:p.field,id:"files",name:"files",type:"file",onChange:function(e){E((0,o.Z)(e.target.files))},multiple:!0})]}),(0,F.jsx)("button",{type:"submit",className:"".concat(p.btn," ").concat(p.modalSubmitButton),children:U?(0,F.jsx)(x(),{color:"#c8c19b",size:"10px"}):"".concat(r("submit"))})]})})]})})]})};function z(){var e=(0,a.v9)(i.NH),r=(0,t.UO)().orderId;return(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(s.B6,{children:[(0,F.jsx)(s.ql,{children:(0,F.jsx)("title",{children:"Order details"})}),(0,F.jsx)("div",{children:e&&"Request in progress..."}),(0,F.jsx)(k,{id:r})]})})}},6502:function(e,r,n){n.d(r,{Hz:function(){return t},NH:function(){return i},ST:function(){return s},pi:function(){return a}});var a=function(e){return e.orders.items},t=function(e){return e.orders.archive},s=function(e){return e.orders.activeItem},i=function(e){return e.orders.isLoading}}}]);
//# sourceMappingURL=913.467d3fea.chunk.js.map