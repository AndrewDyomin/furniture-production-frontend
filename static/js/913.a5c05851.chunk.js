"use strict";(self.webpackChunkfurniture_production_frontend=self.webpackChunkfurniture_production_frontend||[]).push([[913],{381:function(e,n,r){r.d(n,{N:function(){return d}});var a=r(3439),t=r(7948),s=r.n(t),i="PopUp_modalCloseButton__m06-1",c="PopUp_menuIcon__5-11v",o=r(184),d=function(e){var n=e.isOpen,r=e.close,t=e.body;return(0,o.jsxs)(s(),{isOpen:n,onRequestClose:r,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,o.jsx)("button",{className:i,type:"button",onClick:r,children:(0,o.jsx)("svg",{className:c,children:(0,o.jsx)("use",{href:"".concat(a.Z,"#icon-close-circle")})})}),t]})}},9913:function(e,n,r){r.r(n),r.d(n,{default:function(){return w}});var a=r(4420),t=r(7689),s=r(3050),i=r(6502),c=r(5861),o=r(3433),d=r(9439),l=r(4687),u=r.n(l),p={backIcon:"OrderInfo_backIcon__N0wiA",orderNumber:"OrderInfo_orderNumber__2q9MF",description:"OrderInfo_description__zLh2V",orderName:"OrderInfo_orderName__-OHBi",orderSize:"OrderInfo_orderSize__BVU05",orderFabric:"OrderInfo_orderFabric__X9Sm5",orderDescription:"OrderInfo_orderDescription__iXIxd",orderDeadline:"OrderInfo_orderDeadline__8ywa6",imagesList:"OrderInfo_imagesList__LA3Fp",orderImage:"OrderInfo_orderImage__2G8nz",btn:"OrderInfo_btn__fLqg+",minBtn:"OrderInfo_minBtn__uJ0Ts",activeBtn:"OrderInfo_activeBtn__zF9Bf",backBtn:"OrderInfo_backBtn__RBKzG",formWrapper:"OrderInfo_formWrapper__+kjz9",formItem:"OrderInfo_formItem__kNYm6",label:"OrderInfo_label__s3BbH",field:"OrderInfo_field__Q3vr4",inputItem:"OrderInfo_inputItem__GG5Bb",optionWrapper:"OrderInfo_optionWrapper__qdKC2"},m=r(2791),f=r(9230),b=r(8363),h=r.n(b),x=r(5294),v=r(5842),j=r(3439),g=r(5705),_=r(4217),N=r(8384),S=r(381),O=r(1087),y=r(184),I=function(e){e.id;var n,r,s=(0,f.$G)().t,l=(0,a.I0)(),b=(0,a.v9)(i.ST),I=(0,a.v9)(_.dy),w=(0,t.TH)(),F=(0,t.s0)(),k=null!==(n=null===(r=w.state)||void 0===r?void 0:r.from)&&void 0!==n?n:"/orders",z=[{value:"",label:"".concat(s("not ordered"))},{value:"ordered",label:"".concat(s("ordered"))},{value:"received",label:"".concat(s("received"))}],D=b.fabricStatus?{value:"",label:"".concat(s(b.fabricStatus))}:{value:"",label:"".concat(s("not ordered"))};function C(e){var n=new Date(e),r=n.getMonth()+1;return"".concat(n.getDate().toString().padStart(2,"0"),".").concat(r.toString().padStart(2,"0"),".").concat(n.getFullYear())}(0,m.useEffect)((function(){}),[b]);var P=(0,m.useState)(!1),B=(0,d.Z)(P,2),E=B[0],R=B[1],U=(0,m.useState)([]),Z=(0,d.Z)(U,2),L=Z[0],T=Z[1],W=(0,m.useState)(!1),M=(0,d.Z)(W,2),V=M[0],A=M[1];"ordered"===b.fabricStatus?D={value:"ordered",label:"".concat(s("ordered"))}:"received"===b.fabricStatus&&(D={value:"received",label:"".concat(s("received"))});var H=function(){R(!0),document.body.classList.add("modal-open"),T([])},q=function(){R(!1),document.body.classList.remove("modal-open")},G=function(){var e=(0,c.Z)(u().mark((function e(n){var r,a,t,s,i,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),r=b.orderStatus,a=b.fabricStatus,t=b.coverStatus,s=b.frameStatus,""===n.value?a="":n.value&&(a=n.value),n.target&&("isSewn"===n.target.name?t="TRUE"!==b.coverStatus?"TRUE":"":"frame"===n.target.name?s="TRUE"!==b.frameStatus?"TRUE":"":"order"===n.target.name&&(r="TRUE"!==b.orderStatus?"TRUE":"")),(i=new FormData).append("group",b.group),i.append("size",b.size),i.append("name",b.name),i.append("fabric",b.fabric),i.append("description",b.description),i.append("base",b.base),i.append("deliveryDate",b.deliveryDate),i.append("innerPrice",b.innerPrice),i.append("number",b.number),i.append("dealer",b.dealer),i.append("deadline",b.deadline),i.append("dateOfOrder",C(b.dateOfOrder)),i.append("adress",b.adress),i.append("additional",b.additional),i.append("rest",b.rest),i.append("plannedDeadline",C(b.plannedDeadline)),i.append("orderStatus",r),i.append("_id",b._id),b.images.forEach((function(e,n){i.append("images[".concat(n,"]"),b.images[n])})),i.append("fabricStatus",a),i.append("coverStatus",t),i.append("frameStatus",s),e.next=32,x.Z.post("/orders/update",i,{headers:{"Content-Type":"multipart/form-data"}});case 32:c=e.sent,l((0,N.zH)(c.data)),A(!1);case 35:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=(0,c.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(b._id),e.next=3,l((0,N.iI)(b._id));case 3:n=e.sent,console.log(n),F("/orders",{replace:!0});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,y.jsxs)("div",{className:p.wrapper,children:[(0,y.jsx)(O.rU,{to:k,children:(0,y.jsx)("button",{className:"".concat(p.btn," ").concat(p.backBtn),children:(0,y.jsx)("svg",{className:p.backIcon,children:(0,y.jsx)("use",{href:"".concat(j.Z,"#icon-arrow-right"),width:"32px"})})})}),(0,y.jsx)("p",{className:p.orderNumber,children:b.number}),(0,y.jsxs)("div",{className:p.description,children:[(0,y.jsxs)("p",{className:p.orderName,children:[b.group," ",b.name]}),(0,y.jsxs)("p",{className:p.orderSize,children:[s("size"),": ",b.size]}),(0,y.jsxs)("p",{className:p.orderFabric,children:[s("fabric"),": ",b.fabric]}),(0,y.jsxs)("p",{className:p.orderDescription,children:[s("description"),": ",b.description]}),(0,y.jsxs)("p",{className:p.orderDeadline,children:[s("deadline"),": ",C(b.plannedDeadline)]}),(0,y.jsx)("p",{children:b.dealer}),"seamstress"===I.description||"carpenter"===I.description||"upholsterer"===I.description?(0,y.jsx)(y.Fragment,{}):(0,y.jsxs)("div",{children:[(0,y.jsxs)("p",{className:p.orderAdress,children:[s("adress"),": ",b.adress]}),(0,y.jsxs)("p",{className:p.orderRest,children:[s("rest"),": ",b.rest]})]})]}),b.images&&0!==b.images.length?(0,y.jsx)("ul",{className:p.imagesList,children:b.images.map((function(e){return(0,y.jsx)("li",{children:(0,y.jsx)("img",{className:p.orderImage,src:"https://lh3.googleusercontent.com/d/".concat(e,"=w800?authuser=0"),alt:e})},"".concat(e))}))}):(0,y.jsx)(y.Fragment,{}),"administrator"===I.description?(0,y.jsxs)("div",{className:p.optionWrapper,children:[(0,y.jsx)("button",{className:p.btn,onClick:H,children:s("edit")}),(0,y.jsx)(v.ZP,{className:p.fabricStatusSelector,name:"fabricStatusSelector",id:"fabricStatusSelector",onChange:function(e){return G(e)},options:z,defaultValue:D,placeholder:s("fabric")}),(0,y.jsx)("button",{name:"isSewn",className:""===b.coverStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("is sewn"))}),(0,y.jsx)("button",{name:"frame",className:""===b.frameStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("frame is done"))}),(0,y.jsx)("button",{name:"order",className:""===b.orderStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("order is done"))}),(0,y.jsx)("button",{name:"done",className:p.btn,onClick:J,children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("to archive"))})]}):(0,y.jsx)(y.Fragment,{}),"manager"===I.description?(0,y.jsxs)("div",{className:p.optionWrapper,children:[(0,y.jsx)("button",{className:p.btn,onClick:H,children:s("edit")}),(0,y.jsx)(v.ZP,{className:p.fabricStatusSelector,name:"fabricStatusSelector",id:"fabricStatusSelector",onChange:function(e){return G(e)},options:z,defaultValue:D,placeholder:s("fabric")}),(0,y.jsx)("button",{name:"order",className:""===b.orderStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("order is done"))}),(0,y.jsx)("button",{name:"done",className:p.btn,onClick:J,children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("to archive"))})]}):(0,y.jsx)(y.Fragment,{}),"seamstress"===I.description?(0,y.jsx)("div",{className:p.optionWrapper,children:(0,y.jsx)("button",{name:"isSewn",className:""===b.coverStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("is sewn"))})}):(0,y.jsx)(y.Fragment,{}),"carpenter"===I.description?(0,y.jsx)("div",{className:p.optionWrapper,children:(0,y.jsx)("button",{name:"frame",className:""===b.frameStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("frame is done"))})}):(0,y.jsx)(y.Fragment,{}),"upholsterer"===I.description?(0,y.jsx)("div",{className:p.optionWrapper,children:(0,y.jsx)("button",{name:"order",className:""===b.orderStatus?p.btn:"".concat(p.btn," ").concat(p.activeBtn),onClick:function(e){return G(e)},children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("order is done"))})}):(0,y.jsx)(y.Fragment,{}),(0,y.jsx)(S.N,{isOpen:E,close:q,className:p.modalContent,body:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:"Edit mode"}),(0,y.jsx)(g.J9,{initialValues:{group:b.group,size:b.size,name:b.name,fabric:b.fabric,description:b.description,base:b.base,deliveryDate:b.deliveryDate,innerPrice:b.innerPrice,number:b.number,dealer:b.dealer,deadline:b.deadline,dateOfOrder:C(b.dateOfOrder),adress:b.adress,additional:b.additional,rest:b.rest,plannedDeadline:C(b.plannedDeadline),orderStatus:b.orderStatus,_id:b._id,images:b.images,fabricStatus:b.fabricStatus,coverStatus:b.coverStatus,frameStatus:b.frameStatus},onSubmit:function(){var e=(0,c.Z)(u().mark((function e(n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!0),(r=new FormData).append("group",n.group),r.append("size",n.size),r.append("name",n.name),r.append("fabric",n.fabric),r.append("description",n.description),r.append("base",n.base),r.append("deliveryDate",n.deliveryDate),r.append("innerPrice",n.innerPrice),r.append("number",n.number),r.append("dealer",n.dealer),r.append("deadline",n.deadline),r.append("dateOfOrder",n.dateOfOrder),r.append("adress",n.adress),r.append("additional",n.additional),r.append("rest",n.rest),r.append("plannedDeadline",n.plannedDeadline),r.append("orderStatus",n.orderStatus),r.append("_id",n._id),n.images.forEach((function(e,a){r.append("images[".concat(a,"]"),n.images[a])})),r.append("fabricStatus",n.fabricStatus),r.append("coverStatus",n.coverStatus),r.append("frameStatus",n.frameStatus),L.forEach((function(e){r.append("file",e)})),e.next=28,x.Z.post("/orders/update",r,{headers:{"Content-Type":"multipart/form-data"}});case 28:a=e.sent,l((0,N.zH)(a.data)),A(!1),q(),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(0),console.log(e.t0);case 37:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(n){return e.apply(this,arguments)}}(),children:(0,y.jsxs)(g.l0,{className:p.formWrapper,children:[(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"group",children:s("group")}),(0,y.jsx)(g.gN,{className:p.field,id:"group",name:"group"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"size",children:s("size")}),(0,y.jsx)(g.gN,{className:p.field,id:"size",name:"size"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"name",children:s("order name")}),(0,y.jsx)(g.gN,{className:p.field,id:"name",name:"name"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"fabric",children:s("fabric")}),(0,y.jsx)(g.gN,{className:p.field,id:"fabric",name:"fabric"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"description",children:s("description")}),(0,y.jsx)(g.gN,{className:p.field,id:"description",name:"description",placeholder:"Description"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"base",children:s("base")}),(0,y.jsx)(g.gN,{className:p.field,id:"base",name:"base"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"innerPrice",children:s("inner price")}),(0,y.jsx)(g.gN,{className:p.field,id:"innerPrice",name:"innerPrice"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"number",children:s("number")}),(0,y.jsx)(g.gN,{className:p.field,id:"number",name:"number"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"adress",children:s("adress")}),(0,y.jsx)(g.gN,{className:p.field,id:"adress",name:"adress"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"additional",children:s("additional")}),(0,y.jsx)(g.gN,{className:p.field,id:"additional",name:"additional"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"rest",children:s("rest")}),(0,y.jsx)(g.gN,{className:p.field,id:"rest",name:"rest"})]}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"plannedDeadline",children:s("planned deadline")}),(0,y.jsx)(g.gN,{className:p.field,id:"plannedDeadline",name:"plannedDeadline"})]}),(0,y.jsx)("div",{className:p.formItem,children:(0,y.jsx)(g.F2,{name:"images",render:function(e){return(0,y.jsx)("div",{className:p.field,children:e.form.values.images.map((function(n,r){return(0,y.jsxs)("div",{className:p.inputItem,children:[(0,y.jsx)("img",{src:"https://lh3.googleusercontent.com/d/".concat(n,"=w200?authuser=0"),alt:n}),(0,y.jsx)("button",{className:p.btn,type:"button",onClick:function(){return e.remove(r)},children:s("delete")})]},r)}))})}})}),(0,y.jsxs)("div",{className:p.formItem,children:[(0,y.jsx)("label",{htmlFor:"files",children:s("add new images")}),(0,y.jsx)(g.gN,{className:p.field,id:"files",name:"files",type:"file",onChange:function(e){T((0,o.Z)(e.target.files))},multiple:!0})]}),(0,y.jsx)("button",{type:"submit",className:"".concat(p.btn," ").concat(p.modalSubmitButton),children:V?(0,y.jsx)(h(),{color:"#c8c19b",size:"10px"}):"".concat(s("submit"))})]})})]})})]})};function w(){var e=(0,a.v9)(i.NH),n=(0,t.UO)().orderId;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(s.B6,{children:[(0,y.jsx)(s.ql,{children:(0,y.jsx)("title",{children:"Order details"})}),(0,y.jsx)("div",{children:e&&"Request in progress..."}),(0,y.jsx)(I,{id:n})]})})}},6502:function(e,n,r){r.d(n,{NH:function(){return s},ST:function(){return t},pi:function(){return a}});var a=function(e){return e.orders.items},t=function(e){return e.orders.activeItem},s=function(e){return e.orders.isLoading}},8363:function(e,n,r){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++)for(var t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},a.apply(this,arguments)},t=this&&this.__createBinding||(Object.create?function(e,n,r,a){void 0===a&&(a=r);var t=Object.getOwnPropertyDescriptor(n,r);t&&!("get"in t?!n.__esModule:t.writable||t.configurable)||(t={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(e,a,t)}:function(e,n,r,a){void 0===a&&(a=r),e[a]=n[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&t(n,e,r);return s(n,e),n},c=this&&this.__rest||function(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var t=0;for(a=Object.getOwnPropertySymbols(e);t<a.length;t++)n.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(e,a[t])&&(r[a[t]]=e[a[t]])}return r};Object.defineProperty(n,"__esModule",{value:!0});var o=i(r(2791)),d=r(8945),l=(0,r(7074).createAnimation)("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse");n.default=function(e){var n=e.loading,r=void 0===n||n,t=e.color,s=void 0===t?"#000000":t,i=e.speedMultiplier,u=void 0===i?1:i,p=e.cssOverride,m=void 0===p?{}:p,f=e.size,b=void 0===f?15:f,h=e.margin,x=void 0===h?2:h,v=c(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),j=a({display:"inherit"},m),g=function(e){return{backgroundColor:s,width:(0,d.cssValue)(b),height:(0,d.cssValue)(b),margin:(0,d.cssValue)(x),borderRadius:"100%",display:"inline-block",animation:"".concat(l," ").concat(.75/u,"s ").concat(.12*e/u,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return r?o.createElement("span",a({style:j},v),o.createElement("span",{style:g(1)}),o.createElement("span",{style:g(2)}),o.createElement("span",{style:g(3)})):null}},7074:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createAnimation=void 0;n.createAnimation=function(e,n,r){var a="react-spinners-".concat(e,"-").concat(r);if("undefined"==typeof window||!window.document)return a;var t=document.createElement("style");document.head.appendChild(t);var s=t.sheet,i="\n    @keyframes ".concat(a," {\n      ").concat(n,"\n    }\n  ");return s&&s.insertRule(i,0),a}},8945:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.cssValue=n.parseLengthAndUnit=void 0;var r={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function a(e){if("number"===typeof e)return{value:e,unit:"px"};var n,a=(e.match(/^[0-9.]*/)||"").toString();n=a.includes(".")?parseFloat(a):parseInt(a,10);var t=(e.match(/[^0-9]*$/)||"").toString();return r[t]?{value:n,unit:t}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(n,"px.")),{value:n,unit:"px"})}n.parseLengthAndUnit=a,n.cssValue=function(e){var n=a(e);return"".concat(n.value).concat(n.unit)}}}]);
//# sourceMappingURL=913.a5c05851.chunk.js.map