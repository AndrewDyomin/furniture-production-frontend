(self.webpackChunkfurniture_production_frontend=self.webpackChunkfurniture_production_frontend||[]).push([[401],{381:function(e,n,t){"use strict";t.d(n,{N:function(){return o}});var a=t(3439),i=t(7948),s=t.n(i),r="PopUp_modalCloseButton__m06-1",c="PopUp_menuIcon__5-11v",l=t(184),o=function(e){var n=e.isOpen,t=e.close,i=e.body;return(0,l.jsxs)(s(),{isOpen:n,onRequestClose:t,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,l.jsx)("button",{className:r,type:"button",onClick:t,children:(0,l.jsx)("svg",{className:c,children:(0,l.jsx)("use",{href:"".concat(a.Z,"#icon-close-circle")})})}),i]})}},2090:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return O}});var a=t(9439),i=t(7689),s=t(4420),r=(t(8040),t(197)),c=t(9654),l=t(5536),o=t(5612),u={section:"ProductDetails_section__nPSK1",title:"ProductDetails_title__Qkudl",image:"ProductDetails_image__LbA4l",baseInfoTitle:"ProductDetails_baseInfoTitle__0a0ed",price:"ProductDetails_price__DFFDm",adminBlock:"ProductDetails_adminBlock__bY86e"},d=t(2791),m=t(9230),p=t(5842),h=t(7834),f=t(5861),x=t(3433),v=t(4687),b=t.n(v),j={delModalWrapper:"AdminMenu_delModalWrapper__Gfzrs",formWrapper:"AdminMenu_formWrapper__ybfPv",formItem:"AdminMenu_formItem__KchmS",label:"AdminMenu_label__UnqU9",field:"AdminMenu_field__bFN4e",quantityField:"AdminMenu_quantityField__Kt6mI",inputArray:"AdminMenu_inputArray__+FLIB",selectComponent:"AdminMenu_selectComponent__6Gq8o",minBtn:"AdminMenu_minBtn__BCYDU",btn:"AdminMenu_btn__7lnqu",delBtn:"AdminMenu_delBtn__LcZEy",modalSubmitButton:"AdminMenu_modalSubmitButton__lp4X-"},_=t(381),g=t(5705),N=t(5294),y=t(184);N.Z.defaults.baseURL="http://localhost:3030/";var C=function(e){var n=(0,s.I0)(),t=(0,m.$G)().t,i=(0,s.v9)(c.K),r=(0,s.v9)(l._).array,u=i.components.length>0?i.components:[""],h=[],v=[],C=[];try{r.forEach((function(e){h.push({value:e._id,label:"".concat(e.name,"/").concat(e.units)})}))}catch(H){}try{u.forEach((function(e){v.push(e.id),C.push(e.quantity)}))}catch(J){}var Z=(0,d.useState)(!1),I=(0,a.Z)(Z,2),w=I[0],S=I[1],F=(0,d.useState)([].concat(v)),k=(0,a.Z)(F,2),P=k[0],M=k[1],A=(0,d.useState)([].concat(C)),E=(0,a.Z)(A,2),D=E[0],B=E[1],O=(0,d.useState)(!1),q=(0,a.Z)(O,2),U=q[0],L=q[1],W=(0,d.useState)([]),T=(0,a.Z)(W,2),z=T[0],G=T[1];(0,d.useEffect)((function(){M([].concat(v)),B([].concat(C))}),[w]);var K=function(){S(!1),document.body.classList.remove("modal-open")},V=function(){L(!1),document.body.classList.remove("modal-open")},$=function(e){try{return h.find((function(n){return n.value===e})).label}catch(n){return"Select..."}};return(0,y.jsxs)("div",{children:[(0,y.jsx)("button",{onClick:function(){L(!0),document.body.classList.add("modal-open")},className:j.btn,children:t("delete")}),(0,y.jsx)("button",{className:j.btn,onClick:function(){S(!0),document.body.classList.add("modal-open")},children:t("edit")}),(0,y.jsx)(_.N,{isOpen:w,close:K,className:j.modalContent,body:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:t("edit mode")}),(0,y.jsx)(g.J9,{initialValues:{name:i.name,dimensions:{width:i.dimensions.width,height:i.dimensions.height,depth:i.dimensions.depth},description:i.description,basePrice:i.basePrice,components:P,quantity:D,images:i.images},onSubmit:function(){var n=(0,f.Z)(b().mark((function n(t){var a,i,s,r;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=new FormData,i=[],t.images.forEach((function(e,n){a.append("images[".concat(n,"]"),t.images[n])})),z.forEach((function(e){a.append("file",e)})),s=JSON.stringify(t.dimensions),a.append("dimensions",s),a.append("name",t.name),a.append("description",t.description),a.append("basePrice",t.basePrice),a.append("_id",e.id),P.forEach((function(e,n){var t=e,a=D[n];i.push({id:t,quantity:a})})),r=JSON.stringify(i),a.append("components",r),n.next=16,N.Z.post("/collections/update",a,{headers:{"Content-Type":"multipart/form-data"}});case 16:K(),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),console.log(n.t0);case 22:case"end":return n.stop()}}),n,null,[[0,19]])})));return function(e){return n.apply(this,arguments)}}(),children:(0,y.jsxs)(g.l0,{className:j.formWrapper,children:[(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"name",children:t("unit name")}),(0,y.jsx)(g.gN,{className:j.field,id:"name",name:"name"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"dimensions.width",children:t("width")}),(0,y.jsx)(g.gN,{className:j.field,id:"dimensions.width",name:"dimensions.width",placeholder:"Width"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"dimensions.depth",children:t("depth")}),(0,y.jsx)(g.gN,{className:j.field,id:"dimensions.depth",name:"dimensions.depth",placeholder:"Depth"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"dimensions.height",children:t("height")}),(0,y.jsx)(g.gN,{className:j.field,id:"dimensions.height",name:"dimensions.height",placeholder:"Height"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"description",children:t("description")}),(0,y.jsx)(g.gN,{className:j.field,id:"description",name:"description",placeholder:"Description"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"basePrice",children:t("base price")}),(0,y.jsx)(g.gN,{className:j.field,id:"basePrice",name:"basePrice",placeholder:"12500"})]}),(0,y.jsx)("div",{className:j.formItem,children:(0,y.jsx)(g.F2,{name:"images",render:function(e){return(0,y.jsx)("div",{className:j.field,children:e.form.values.images.map((function(n,a){return(0,y.jsxs)("div",{className:j.inputItem,children:[(0,y.jsx)("img",{src:n,alt:n,width:"200px"}),(0,y.jsx)("button",{className:j.btn,type:"button",onClick:function(){return e.remove(a)},children:t("delete")})]},a)}))})}})}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"files",children:t("add new images")}),(0,y.jsx)(g.gN,{className:j.field,id:"files",name:"files",type:"file",onChange:function(e){G((0,x.Z)(e.target.files))},multiple:!0})]}),(0,y.jsx)("div",{className:j.formItem,children:(0,y.jsx)(g.F2,{name:"components",render:function(e){return(0,y.jsx)("div",{children:P.map((function(e,n){return(0,y.jsxs)("div",{className:j.inputArray,children:[(0,y.jsx)(g.gN,{component:p.ZP,className:j.selectComponent,name:"components.".concat(n),onChange:function(e){return M((function(t){var a=(0,x.Z)(t);return a[n]=e.value,a}))},options:h,placeholder:$(e)}),(0,y.jsx)(g.gN,{className:"".concat(j.field," ").concat(j.quantityField),name:"quantity.".concat(n),value:D[n]||"",onChange:function(e){return B((function(t){var a=(0,x.Z)(t);return a[n]=e.target.value,a}))},placeholder:"Quantity"}),P.length>1?(0,y.jsx)("button",{className:j.minBtn,type:"button",onClick:function(){return function(e){M((function(n){return n.filter((function(n){return n!==e}))})),B((function(n){return n.filter((function(n,t){return P[t]!==e}))}))}(e)},children:"-"}):(0,y.jsx)(y.Fragment,{}),n===P.length-1&&(0,y.jsx)("button",{className:j.minBtn,type:"button",onClick:function(){return M((function(e){return[].concat((0,x.Z)(e),[""])})),void B((function(e){return[].concat((0,x.Z)(e),[""])}))},children:"+"})]},e)}))})}})}),(0,y.jsx)("button",{type:"submit",className:"".concat(j.btn," ").concat(j.modalSubmitButton),children:t("submit")})]})})]})}),(0,y.jsx)(_.N,{isOpen:U,close:V,body:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("p",{children:[t("are you sure"),"???"]}),(0,y.jsxs)("div",{className:j.delModalWrapper,children:[(0,y.jsx)("button",{onClick:V,className:j.btn,children:t("cancel")}),(0,y.jsx)("button",{onClick:function(){n((0,o.Ir)(e))},className:"".concat(j.btn," ").concat(j.delBtn),children:t("delete")})]})]})})]})},Z=t(7762),I="ManagerOptions_calcHeader__MCCJx",w="ManagerOptions_calcArea__iO44i",S="ManagerOptions_schemaArea__yTzrP",F="ManagerOptions_inputsArea__TTiKG",k="ManagerOptions_sizeInput__2CgY1",P=t(744),M=function(){var e=(0,m.$G)().t,n=(0,s.I0)(),i=(0,s.v9)((function(e){return e.products.activeItem})),r=(0,s.v9)((function(e){return e.fabrics.items})),c=(0,d.useState)(null),l=(0,a.Z)(c,2),o=l[0],u=l[1],h=(0,d.useState)(i.dimensions.width||0),v=(0,a.Z)(h,2),j=v[0],_=v[1],g=(0,d.useState)(i.dimensions.depth||0),N=(0,a.Z)(g,2),C=N[0],M=N[1],A=(0,d.useState)({value:"7",label:"7"}),E=(0,a.Z)(A,2),D=E[0],B=E[1],O=(0,d.useState)([]),q=(0,a.Z)(O,2),U=q[0],L=q[1],W=(0,d.useState)({value:"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e",label:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}),T=(0,a.Z)(W,2),z=T[0],G=T[1],K=(0,d.useState)([]),V=(0,a.Z)(K,2),$=V[0],H=V[1],J=(0,d.useState)({value:"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e",label:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}),R=(0,a.Z)(J,2),Y=R[0],Q=R[1];(0,d.useEffect)((function(){0===r.length&&n((0,P.T)())}),[n,r.length]),(0,d.useEffect)((function(){if(r&&r.length>0){var e=r.map((function(e){return{value:e.title,label:e.title.charAt(0).toUpperCase()+e.title.slice(1)}}));L([{value:"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e",label:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}].concat((0,x.Z)(e)))}}),[r]),(0,d.useEffect)((function(){if("\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"!==z.value){var e,n=r.find((function(e){return e.title===z.value})),t=[],a=(0,Z.Z)(n.array);try{for(a.s();!(e=a.n()).done;){var i=e.value;t.push({value:"".concat(i.name," -$").concat(i.price),label:"".concat(i.name.charAt(0).toUpperCase()+i.name.slice(1)," -$").concat(i.price)})}}catch(s){a.e(s)}finally{a.f()}Q({value:"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e",label:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}),H([{value:"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e",label:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}].concat(t))}}),[z,r]);var X=(0,d.useRef)(null),ee=(0,d.useState)({width:0,height:0}),ne=(0,a.Z)(ee,2),te=ne[0],ae=ne[1];return(0,d.useEffect)((function(){var e=function(){X.current&&ae({width:X.current.offsetWidth,height:X.current.offsetHeight})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,d.useEffect)((function(){var e=function(){var e=(0,f.Z)(b().mark((function e(){var n,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(3604)("./".concat(i.name));case 3:n=e.sent,u((function(){return n.default})),e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Promise.all([t.e(363),t.e(417)]).then(t.bind(t,2417));case 11:a=e.sent,u((function(){return a.default}));case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[i.name]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("h3",{className:I,children:e("cost calculation")}),(0,y.jsxs)("div",{className:w,children:[(0,y.jsx)("div",{ref:X,className:S,children:o?(0,y.jsx)(o,{dimensions:te,productWidth:j,productDepth:C,angleDirection:D}):(0,y.jsx)("p",{children:"Loading..."})}),(0,y.jsxs)("div",{className:F,children:[(0,y.jsxs)("label",{children:[e("width"),(0,y.jsx)("input",{className:k,defaultValue:j,onChange:function(e){return e.target.value>100&&_(e.target.value)}})]}),(0,y.jsxs)("label",{children:[e("depth"),(0,y.jsx)("input",{className:k,defaultValue:C,onChange:function(e){return e.target.value>100&&M(e.target.value)}})]}),i.costCalc.corner&&(0,y.jsxs)("label",{children:[e("angle direction"),(0,y.jsx)(p.ZP,{placeholder:"\u0443\u0433\u043e\u043b \u043f\u043e\u0432\u043e\u0440\u043e\u0442\u0430",options:[{value:"7",label:"7"},{value:"\u0413",label:"\u0413"}],defaultValue:D,onChange:function(e){return B(e)}})]}),(0,y.jsxs)("label",{children:[e("\u0423\u0442\u044f\u0436\u043a\u0438"),(0,y.jsx)(p.ZP,{placeholder:"\u0443\u0442\u044f\u0436\u043a\u0438",options:[{value:"\u0441 \u0443\u0442\u044f\u0436\u043a\u0430\u043c\u0438",label:"\u0421 \u0443\u0442\u044f\u0436\u043a\u0430\u043c\u0438"},{value:"\u0431\u0435\u0437 \u0443\u0442\u044f\u0436\u0435\u043a",label:"\u0411\u0435\u0437 \u0443\u0442\u044f\u0436\u0435\u043a"}],defaultValue:{value:"\u0441 \u0443\u0442\u044f\u0436\u043a\u0430\u043c\u0438",label:"\u0421 \u0443\u0442\u044f\u0436\u043a\u0430\u043c\u0438"}})]}),(0,y.jsxs)("label",{children:[e("supplier"),(0,y.jsx)(p.ZP,{name:"fabricDealer",placeholder:"\u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0442\u043a\u0430\u043d\u0438",defaultValue:z,options:U.sort((function(e,n){return e.value.localeCompare(n.value)})),onChange:function(e){return G(e)}})]}),"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"!==z.value&&(0,y.jsxs)("label",{children:[e("fabric name"),(0,y.jsx)(p.ZP,{placeholder:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043a\u0430\u043d\u0438",options:$,value:Y,onChange:function(e){return Q(e)}})]})]})]})]})},A=function(e){var n=e.components,t=(0,s.v9)(l._).array,i=(0,m.$G)().t,r=(0,d.useState)(0),c=(0,a.Z)(r,2),o=c[0],u=c[1],p=(0,d.useState)(0),h=(0,a.Z)(p,2),f=h[0],x=h[1],v=(0,d.useCallback)((function(e){return t&&0!==t.length?t.find((function(n){return n._id===e})):{_id:"",name:"",price:0,currency:"USD",units:"\u0448\u0442"}}),[t]);(0,d.useEffect)((function(){var e=0,t=0;n.forEach((function(n){var a=v(n.id).price*n.quantity;"\u0433\u0440\u043d"===v(n.id).currency?e+=a:t+=a})),u(Math.round(e)),x(Math.round(t))}),[n,v]);try{return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("p",{children:[i("product components"),":"]}),(0,y.jsx)("ul",{children:n.map((function(e){return(0,y.jsx)("li",{children:(0,y.jsx)("p",{children:"".concat(v(e.id).name," - ").concat(e.quantity," ").concat(v(e.id).units)})},e.id)}))}),(0,y.jsx)("p",{children:"".concat(i("total"),": ").concat(o,"\u0433\u0440\u043d, $").concat(f)})]})}catch(b){return(0,y.jsx)("p",{children:"not found"})}},E=t(4253),D=[{value:"140",label:"140 x 200(190)"},{value:"160",label:"160 x 200(190)"},{value:"180",label:"180 x 200(190)"},{value:"200",label:"200 x 200(190)"}],B=function(){var e=(0,s.I0)(),n=(0,h.a)(),t=n.user,f=n.isLoggedIn,x=(0,d.useState)({value:"160",label:"160 x 200(190)"}),v=(0,a.Z)(x,2),b=v[0],j=v[1],_=(0,i.UO)().id,g=(0,s.v9)(c.K),N=(0,s.v9)(l._),Z=(0,m.$G)().t,I=g.dimensions.width-160;return(0,d.useEffect)((function(){e((0,o.wv)(_)),f&&0===N.length&&e((0,E.sd)())}),[e,N.length,f,_]),(0,y.jsxs)("div",{className:u.section,children:[(0,y.jsx)("h1",{className:u.title,children:g.name}),(0,y.jsx)(r.lr,{showIndicators:!1,children:g.images.map((function(e){return(0,y.jsx)("div",{children:(0,y.jsx)("img",{src:e,alt:g.name})},e)}))}),"bed"===g.group?(0,y.jsxs)("div",{className:u.baseInfoWrapper,children:[(0,y.jsxs)("p",{className:u.baseInfoTitle,children:[Z("sleeping area"),":"]}),(0,y.jsx)(p.ZP,{defaultValue:b,onChange:j,options:D}),(0,y.jsxs)("p",{className:u.baseInfoTitle,children:[Z("overall size"),":"]}),(0,y.jsxs)("p",{children:[Number(b.value)+Number(I)," x ",g.dimensions.depth,"(",g.dimensions.depth-10,")"]})]}):(0,y.jsxs)("div",{className:u.baseInfoWrapper,children:[(0,y.jsxs)("p",{className:u.baseInfoTitle,children:[Z("overall size"),":"]}),(0,y.jsxs)("p",{children:[g.dimensions.depth," x ",g.dimensions.width," x ",g.dimensions.height]})]}),(0,y.jsxs)("p",{className:u.baseInfoTitle,children:[Z("description"),":"]}),(0,y.jsx)("p",{children:g.description}),f?"administrator"===t.description&&(0,y.jsxs)("div",{className:u.adminBlock,children:[(0,y.jsx)(A,{components:g.components}),(0,y.jsx)(C,{id:_})]}):(0,y.jsx)(y.Fragment,{}),f?(0,y.jsx)("div",{className:u.adminBlock,children:(0,y.jsx)(M,{})},g._id):(0,y.jsx)(y.Fragment,{})]})};function O(){return(0,y.jsx)(B,{})}},5536:function(e,n,t){"use strict";t.d(n,{_:function(){return a}});var a=function(e){return e.components.items}},9654:function(e,n,t){"use strict";t.d(n,{K:function(){return i},q:function(){return a}});var a=function(e){return e.products.items},i=function(e){return e.products.activeItem}},3604:function(e,n,t){var a={"./Marsel":[7630,363,630],"./Marsel.js":[7630,363,630],"./Smart":[779,363,779],"./Smart.js":[779,363,779],"./Undefined":[2417,363,417],"./Undefined.js":[2417,363,417]};function i(e){if(!t.o(a,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=a[e],i=n[0];return Promise.all(n.slice(1).map(t.e)).then((function(){return t(i)}))}i.keys=function(){return Object.keys(a)},i.id=3604,e.exports=i}}]);
//# sourceMappingURL=401.5e99468b.chunk.js.map