"use strict";(self.webpackChunkfurniture_production_frontend=self.webpackChunkfurniture_production_frontend||[]).push([[82],{8082:function(t,e,i){i.r(e);var n=i(1413),o=i(9439),r=i(2791),s=i(1178),h=i(184),d=(0,r.forwardRef)((function(t,e){var i=t.dimensions,d=t.productWidth,c=t.productDepth,u=t.activeModules,x=t.setActiveModules,a=(0,r.useState)(1),l=(0,o.Z)(a,2),k=l[0],f=l[1],g=(0,r.useRef)(null),m=c*k,p=d*k,y=i.width/2,j=i.height/2,w=u.some((function(t){return"ARML"===t.id}))&&u.some((function(t){return"ARMR"===t.id}));(0,r.useEffect)((function(){var t=Math.min(.7*i.width/d,.7*i.height/c);(t>0||t!==k)&&(f(t),console.log("scale:",t))}),[i,d,c,k]),(0,r.useImperativeHandle)(e,(function(){return{getImage:function(){return g.current.toDataURL({mimeType:"image/jpeg",quality:1})}}}));var R=(0,r.useMemo)((function(){return[{id:"FM01",name:"\u043c\u043e\u0434\u0443\u043b\u044c",position:{x:y,y:j},height:120,width:100,mark:function(t,e,i){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.x1,{points:[t.x,t.y+8*k,t.x+i/2,t.y+3*k,t.x+i,t.y+8*k],stroke:"black",strokeWidth:1,closed:!1,lineJoin:"round",tension:.7}),(0,h.jsx)(s.UL,{x:t.x,y:t.y+8*k,width:i,height:e/6,stroke:"black",strokeWidth:1,cornerRadius:2}),(0,h.jsx)(s.UL,{x:t.x,y:t.y+e/6+8*k,width:i,height:e-(e/6+8*k),stroke:"black",strokeWidth:1,cornerRadius:4})]})}},{id:"ARML",name:"\u043f\u043e\u0434\u043b\u043e\u043a\u043e\u0442\u043d\u0438\u043a \u043b\u0435\u0432\u044b\u0439",position:{x:y,y:j},height:120,width:17.5,mark:function(t,e,i){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.x1,{points:[t.x+2.5*k,t.y,t.x,t.y+e/2,t.x+2.5*k,t.y+e],stroke:"black",strokeWidth:1,closed:!1,lineJoin:"round",tension:1}),(0,h.jsx)(s.UL,{x:t.x+2.5*k,y:t.y,width:i-2.5*k,height:e,stroke:"black",strokeWidth:1,cornerRadius:[0,3,3,0]})]})}},{id:"ARMR",name:"\u043f\u043e\u0434\u043b\u043e\u043a\u043e\u0442\u043d\u0438\u043a \u043f\u0440\u0430\u0432\u044b\u0439",position:{x:y,y:j},height:120,width:17.5,mark:function(t,e,i){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.x1,{points:[t.x+i-2.5*k,t.y,t.x+i,t.y+e/2,t.x+i-2.5*k,t.y+e],stroke:"black",strokeWidth:1,closed:!1,lineJoin:"round",tension:1}),(0,h.jsx)(s.UL,{x:t.x,y:t.y,width:i-2.5*k,height:e,stroke:"black",strokeWidth:1,cornerRadius:[3,0,0,3]})]})}},{id:"BKPL",name:"\u043f\u0440\u0438\u0441\u0442\u0435\u043d\u043e\u043a",position:{x:y,y:j},height:3,width:200,mark:function(t,e,i,n){return n?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(s.UL,{x:u[0]?y-p/2+u[0].width*k:0,y:t.y,width:u[0]?p-u[0].width*k+u[u.length-2].width*k:0,height:3*k,stroke:"black",strokeWidth:1,cornerRadius:[3,3,0,0]})}):(console.log("not enough arms"),(0,h.jsx)(h.Fragment,{}))}}]}),[y,j,k,u,p]);return(0,r.useEffect)((function(){var t=-p/2,e=j-m/2;if(0===u.length){var i=["ARML","FM01","FM01","ARMR","BKPL"].map((function(t){return R.find((function(e){return e.id===t}))})).filter(Boolean);x(i)}else if(u[0].position.x===y){var o={x:t,y:e},r=u.map((function(i){return t+=i.width*k,e+=0,(0,n.Z)((0,n.Z)({},i),{},{position:o})}));console.log(r),x(r)}console.log(u),0!==u.length&&console.log("1",u[0].position.x,"2",t)}),[u,x,k,R,y,j,m,p]),(0,h.jsx)("div",{children:(0,h.jsxs)(s.Hf,{ref:g,width:i.width,height:i.height,children:[(0,h.jsx)(s.mh,{children:(0,h.jsx)(s.UL,{x:0,y:0,width:i.width,height:i.height,fill:"#FFF"})}),function(){var t=y-p/2,e=j-m/2,i=[],n={};return n.position={x:y-p/2,y:j-m/2},(0,h.jsx)(s.mh,{children:u.map((function(o,r){var d={x:t,y:e};i.push(d);var c=o.height*k,u=o.width*k;return t+=o.width*k,e+=0,(0,h.jsx)(s.ZA,{children:"BKPL"===o.id?o.mark(n.position,c,u,w):o.mark(d,c,u,w)},r)}))})}(),(0,h.jsxs)(s.mh,{children:[(0,h.jsx)(s.x1,{points:[y+50,j+m/1.4,y+p/2,j+m/1.4],stroke:"black",strokeWidth:1,closed:!1}),(0,h.jsx)(s.x1,{points:[y-50,j+m/1.4,y-p/2,j+m/1.4],stroke:"black",strokeWidth:1,closed:!1}),(0,h.jsx)(s.xv,{x:y-50,y:j+m/1.4-9,text:d,width:100,align:"center",fontSize:18}),(0,h.jsx)(s.x1,{points:[y-p/1.7,j-m/2,y-p/1.7,j-50],stroke:"black",strokeWidth:1,closed:!1}),(0,h.jsx)(s.x1,{points:[y-p/1.7,j+50,y-p/1.7,j+m/2],stroke:"black",strokeWidth:1,closed:!1}),(0,h.jsx)(s.xv,{x:y-p/1.7-9,y:j+50,text:c,width:100,align:"center",rotation:270,fontSize:18})]})]})})}));e.default=d}}]);
//# sourceMappingURL=82.67979eaf.chunk.js.map