"use strict";(self.webpackChunkfurniture_production_frontend=self.webpackChunkfurniture_production_frontend||[]).push([[241],{381:function(e,n,t){t.d(n,{N:function(){return l}});var i=t(3439),s=t(7948),a=t.n(s),c="PopUp_modalCloseButton__m06-1",r="PopUp_menuIcon__5-11v",o=t(184),l=function(e){var n=e.isOpen,t=e.close,s=e.body;return(0,o.jsxs)(a(),{isOpen:n,onRequestClose:t,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,o.jsx)("button",{className:c,type:"button",onClick:t,children:(0,o.jsx)("svg",{className:r,children:(0,o.jsx)("use",{href:"".concat(i.Z,"#icon-close-circle")})})}),s]})}},4629:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var i=t(9439),s=t(7689),a=t(4420),c=(t(8040),t(197)),r=t(9654),o={section:"ProductDetails_section__nPSK1",title:"ProductDetails_title__Qkudl",image:"ProductDetails_image__LbA4l",baseInfoTitle:"ProductDetails_baseInfoTitle__0a0ed",price:"ProductDetails_price__DFFDm",adminBlock:"ProductDetails_adminBlock__bY86e"},l=t(2791),d=t(9230),u=t(5842),m=t(7834),p=t(5861),h=t(3433),f=t(4687),x=t.n(f),b=t(5612),j={delModalWrapper:"AdminMenu_delModalWrapper__Gfzrs",formWrapper:"AdminMenu_formWrapper__ybfPv",formItem:"AdminMenu_formItem__KchmS",label:"AdminMenu_label__UnqU9",field:"AdminMenu_field__bFN4e",quantityField:"AdminMenu_quantityField__Kt6mI",inputArray:"AdminMenu_inputArray__+FLIB",selectComponent:"AdminMenu_selectComponent__6Gq8o",minBtn:"AdminMenu_minBtn__BCYDU",btn:"AdminMenu_btn__7lnqu",delBtn:"AdminMenu_delBtn__LcZEy",modalSubmitButton:"AdminMenu_modalSubmitButton__lp4X-"},_=t(381),v=t(5705),N=t(5294),g=t(5536),y=t(184);N.Z.defaults.baseURL="https://furniture-production.onrender.com/";var I=function(e){var n=(0,a.I0)(),t=(0,d.$G)().t,s=(0,a.v9)(r.K),c=(0,a.v9)(g._).array,o=s.components.length>0?s.components:[""],m=[],f=[],I=[];try{c.forEach((function(e){m.push({value:e._id,label:"".concat(e.name,"/").concat(e.units)})}))}catch(J){}try{o.forEach((function(e){f.push(e.id),I.push(e.quantity)}))}catch(R){}var C=(0,l.useState)(!1),F=(0,i.Z)(C,2),k=F[0],P=F[1],Z=(0,l.useState)([].concat(f)),w=(0,i.Z)(Z,2),A=w[0],M=w[1],S=(0,l.useState)([].concat(I)),B=(0,i.Z)(S,2),q=B[0],D=B[1],W=(0,l.useState)(!1),E=(0,i.Z)(W,2),L=E[0],T=E[1],O=(0,l.useState)([]),U=(0,i.Z)(O,2),K=U[0],G=U[1];(0,l.useEffect)((function(){M([].concat(f)),D([].concat(I))}),[k]);var $=function(){P(!1),document.body.classList.remove("modal-open")},z=function(){T(!1),document.body.classList.remove("modal-open")},H=function(e){try{return m.find((function(n){return n.value===e})).label}catch(n){return"Select..."}};return(0,y.jsxs)("div",{children:[(0,y.jsx)("button",{onClick:function(){T(!0),document.body.classList.add("modal-open")},className:j.btn,children:t("delete")}),(0,y.jsx)("button",{className:j.btn,onClick:function(){P(!0),document.body.classList.add("modal-open")},children:t("edit")}),(0,y.jsx)(_.N,{isOpen:k,close:$,className:j.modalContent,body:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:t("edit mode")}),(0,y.jsx)(v.J9,{initialValues:{name:s.name,dimensions:{width:s.dimensions.width,height:s.dimensions.height,depth:s.dimensions.depth},description:s.description,basePrice:s.basePrice,components:A,quantity:q,images:s.images},onSubmit:function(){var n=(0,p.Z)(x().mark((function n(t){var i,s,a,c;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=new FormData,s=[],t.images.forEach((function(e,n){i.append("images[".concat(n,"]"),t.images[n])})),K.forEach((function(e){i.append("file",e)})),a=JSON.stringify(t.dimensions),i.append("dimensions",a),i.append("name",t.name),i.append("description",t.description),i.append("basePrice",t.basePrice),i.append("_id",e.id),A.forEach((function(e,n){var t=e,i=q[n];s.push({id:t,quantity:i})})),c=JSON.stringify(s),i.append("components",c),n.next=16,N.Z.post("/collections/update",i,{headers:{"Content-Type":"multipart/form-data"}});case 16:$(),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),console.log(n.t0);case 22:case"end":return n.stop()}}),n,null,[[0,19]])})));return function(e){return n.apply(this,arguments)}}(),children:(0,y.jsxs)(v.l0,{className:j.formWrapper,children:[(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"name",children:t("unit name")}),(0,y.jsx)(v.gN,{className:j.field,id:"name",name:"name"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"dimensions.width",children:t("width")}),(0,y.jsx)(v.gN,{className:j.field,id:"dimensions.width",name:"dimensions.width",placeholder:"Width"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"dimensions.depth",children:t("depth")}),(0,y.jsx)(v.gN,{className:j.field,id:"dimensions.depth",name:"dimensions.depth",placeholder:"Depth"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"dimensions.height",children:t("height")}),(0,y.jsx)(v.gN,{className:j.field,id:"dimensions.height",name:"dimensions.height",placeholder:"Height"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"description",children:t("description")}),(0,y.jsx)(v.gN,{className:j.field,id:"description",name:"description",placeholder:"Description"})]}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"basePrice",children:t("base price")}),(0,y.jsx)(v.gN,{className:j.field,id:"basePrice",name:"basePrice",placeholder:"12500"})]}),(0,y.jsx)("div",{className:j.formItem,children:(0,y.jsx)(v.F2,{name:"images",render:function(e){return(0,y.jsx)("div",{className:j.field,children:e.form.values.images.map((function(n,i){return(0,y.jsxs)("div",{className:j.inputItem,children:[(0,y.jsx)("img",{src:n,alt:n,width:"200px"}),(0,y.jsx)("button",{className:j.btn,type:"button",onClick:function(){return e.remove(i)},children:t("delete")})]},i)}))})}})}),(0,y.jsxs)("div",{className:j.formItem,children:[(0,y.jsx)("label",{htmlFor:"files",children:t("add new images")}),(0,y.jsx)(v.gN,{className:j.field,id:"files",name:"files",type:"file",onChange:function(e){G((0,h.Z)(e.target.files))},multiple:!0})]}),(0,y.jsx)("div",{className:j.formItem,children:(0,y.jsx)(v.F2,{name:"components",render:function(e){return(0,y.jsx)("div",{children:A.map((function(e,n){return(0,y.jsxs)("div",{className:j.inputArray,children:[(0,y.jsx)(v.gN,{component:u.ZP,className:j.selectComponent,name:"components.".concat(n),onChange:function(e){return M((function(t){var i=(0,h.Z)(t);return i[n]=e.value,i}))},options:m,placeholder:H(e)}),(0,y.jsx)(v.gN,{className:"".concat(j.field," ").concat(j.quantityField),name:"quantity.".concat(n),value:q[n]||"",onChange:function(e){return D((function(t){var i=(0,h.Z)(t);return i[n]=e.target.value,i}))},placeholder:"Quantity"}),A.length>1?(0,y.jsx)("button",{className:j.minBtn,type:"button",onClick:function(){return function(e){M((function(n){return n.filter((function(n){return n!==e}))})),D((function(n){return n.filter((function(n,t){return A[t]!==e}))}))}(e)},children:"-"}):(0,y.jsx)(y.Fragment,{}),n===A.length-1&&(0,y.jsx)("button",{className:j.minBtn,type:"button",onClick:function(){return M((function(e){return[].concat((0,h.Z)(e),[""])})),void D((function(e){return[].concat((0,h.Z)(e),[""])}))},children:"+"})]},e)}))})}})}),(0,y.jsx)("button",{type:"submit",className:"".concat(j.btn," ").concat(j.modalSubmitButton),children:t("submit")})]})})]})}),(0,y.jsx)(_.N,{isOpen:L,close:z,body:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("p",{children:[t("are you sure"),"???"]}),(0,y.jsxs)("div",{className:j.delModalWrapper,children:[(0,y.jsx)("button",{onClick:z,className:j.btn,children:t("cancel")}),(0,y.jsx)("button",{onClick:function(){n((0,b.Ir)(e))},className:"".concat(j.btn," ").concat(j.delBtn),children:t("delete")})]})]})})]})},C=function(e){var n=e.components,t=(0,a.v9)(g._).array,s=(0,d.$G)().t,c=(0,l.useState)(0),r=(0,i.Z)(c,2),o=r[0],u=r[1],m=(0,l.useState)(0),p=(0,i.Z)(m,2),h=p[0],f=p[1],x=(0,l.useCallback)((function(e){return t.find((function(n){return n._id===e}))}),[t]);(0,l.useEffect)((function(){var e=0,t=0;n.forEach((function(n){var i=x(n.id).price*n.quantity;"\u0433\u0440\u043d"===x(n.id).currency?e+=i:t+=i})),u(Math.round(e)),f(Math.round(t))}),[n,x]);try{return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("p",{children:[s("product components"),":"]}),(0,y.jsx)("ul",{children:n.map((function(e){return(0,y.jsx)("li",{children:(0,y.jsx)("p",{children:"".concat(x(e.id).name," - ").concat(e.quantity," ").concat(x(e.id).units)})},e.id)}))}),(0,y.jsx)("p",{children:"".concat(s("total"),": ").concat(o,"\u0433\u0440\u043d, $").concat(h)})]})}catch(b){return(0,y.jsx)("p",{children:"not found"})}},F=[{value:"140",label:"140 x 200(190)"},{value:"160",label:"160 x 200(190)"},{value:"180",label:"180 x 200(190)"},{value:"200",label:"200 x 200(190)"}],k=function(){var e=(0,m.a)(),n=e.user,t=e.isLoggedIn,p=(0,l.useState)({value:"160",label:"160 x 200(190)"}),h=(0,i.Z)(p,2),f=h[0],x=h[1],b=(0,s.UO)().id,j=(0,a.v9)(r.K),_=(0,d.$G)().t,v=j.dimensions.width-160,N=j.basePrice;return(0,y.jsxs)("div",{className:o.section,children:[(0,y.jsx)("h1",{className:o.title,children:j.name}),(0,y.jsx)(c.lr,{showIndicators:!1,children:j.images.map((function(e){return(0,y.jsx)("div",{children:(0,y.jsx)("img",{src:e,alt:j.name})},e)}))}),"bed"===j.group?(0,y.jsxs)("div",{className:o.baseInfoWrapper,children:[(0,y.jsxs)("p",{className:o.baseInfoTitle,children:[_("sleeping area"),":"]}),(0,y.jsx)(u.ZP,{defaultValue:f,onChange:x,options:F}),(0,y.jsxs)("p",{className:o.baseInfoTitle,children:[_("overall size"),":"]}),(0,y.jsxs)("p",{children:[Number(f.value)+Number(v)," x ",j.dimensions.depth,"(",j.dimensions.depth-10,")"]}),(0,y.jsxs)("p",{className:o.baseInfoTitle,children:[_("price"),":"]}),(0,y.jsxs)("p",{className:o.price,children:[N," \u20b4"]})]}):(0,y.jsxs)("div",{className:o.baseInfoWrapper,children:[(0,y.jsxs)("p",{className:o.baseInfoTitle,children:[_("overall size"),":"]}),(0,y.jsxs)("p",{children:[j.dimensions.depth," x ",j.dimensions.width," x ",j.dimensions.height]}),(0,y.jsxs)("p",{className:o.baseInfoTitle,children:[_("price"),":"]}),(0,y.jsxs)("p",{className:o.price,children:[j.basePrice," \u20b4"]})]}),(0,y.jsxs)("p",{className:o.baseInfoTitle,children:[_("description"),":"]}),(0,y.jsx)("p",{children:j.description}),t?"administrator"===n.description&&(0,y.jsxs)("div",{className:o.adminBlock,children:[(0,y.jsx)(C,{components:j.components}),(0,y.jsx)(I,{id:b})]}):(0,y.jsx)(y.Fragment,{})]})};function P(){return(0,y.jsx)(k,{})}},5536:function(e,n,t){t.d(n,{_:function(){return i}});var i=function(e){return e.components.items}},9654:function(e,n,t){t.d(n,{K:function(){return s},q:function(){return i}});var i=function(e){return e.products.items},s=function(e){return e.products.activeItem}}}]);
//# sourceMappingURL=241.0d3fed65.chunk.js.map